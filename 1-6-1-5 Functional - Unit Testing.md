# **單元測試 (Unit Testing) 重點整理**

## **什麼是單元測試？**
單元測試是一種軟體測試方法，專注於測試**個別單元 (Unit) 或組件**是否正常運作。目的是驗證每個單元的行為是否符合預期。單元測試通常在**開發階段 (Coding Phase)** 由開發人員執行，並透過隔離單元來驗證其正確性。

- **單元 (Unit)** 可以是函式、方法、程序、模組或物件。
- 在 **軟體開發生命週期 (SDLC)** 和 **測試生命週期 (STLC)** 中，單元測試是**最早執行**的測試，先於整合測試 (Integration Testing) 進行。
- **白箱測試 (WhiteBox Testing)** 技術的一種，通常由開發人員執行，但在實務上可能由 QA 工程師代勞。

---

## **為何進行單元測試？**
單元測試能夠及早發現錯誤，避免在系統測試、整合測試或 Beta 測試階段才修復缺陷，進而降低開發成本與時間。

### **單元測試的優勢**
- **早期發現錯誤，降低成本**
- **幫助開發人員理解程式碼**
- **提供文件化的測試案例**
- **促進程式碼重複使用**，可將測試案例移植至新專案

---

## **如何執行單元測試？**
開發人員會撰寫測試代碼來測試特定函式，並可透過隔離測試發現不必要的相依性。

### **單元測試類型**
1. **手動測試 (Manual Testing)**
   - 透過測試文件逐步執行測試，適用於小型專案。

2. **自動化測試 (Automated Testing)（較常見）**
   - **開發人員撰寫測試代碼**，並在測試環境中執行。
   - **隔離測試**：將函式或模組單獨測試，以找出不必要的相依性。
   - **使用測試框架 (Unit Test Framework)** 自動執行測試並記錄結果。

### **自動化單元測試流程**
1. **建立測試案例**
2. **檢查與修正 (Review/Rework)**
3. **基準測試 (Baseline)**
4. **執行測試案例 (Execute Test Cases)**

---

## **單元測試技術**
單元測試技術可分為：
1. **黑箱測試 (Black Box Testing)**：測試輸入與輸出，確保符合需求。
2. **白箱測試 (White Box Testing)**：測試內部邏輯與函式行為。
3. **灰箱測試 (Gray Box Testing)**：綜合黑箱與白箱測試。

### **程式碼覆蓋率技術**
- **語句覆蓋 (Statement Coverage)**
- **決策覆蓋 (Decision Coverage)**
- **分支覆蓋 (Branch Coverage)**
- **條件覆蓋 (Condition Coverage)**
- **有限狀態機覆蓋 (Finite State Machine Coverage)**

---

## **單元測試的應用：模擬物件 (Mock Objects)**
- 單元測試依賴**模擬物件 (Mock Objects)** 來測試尚未完成的部分。
- 若函式需要未建立的變數或物件，則使用模擬物件來填補空缺。

---

## **測試驅動開發 (TDD) 與單元測試**
測試驅動開發 (Test-Driven Development, TDD) 是一種軟體開發方法，強調**先寫測試，再開發功能**：

- **測試編寫先於程式碼**
- **高度依賴單元測試框架**
- **所有類別與方法都需測試**
- **可快速整合與驗證功能**

---

## **單元測試的迷思**
- **「單元測試浪費時間」**：實際上，單元測試能**加速開發**，減少錯誤修復成本。
- **「我的程式碼沒有錯，不需要單元測試」**：沒有測試就無法保證正確性，可能導致後續發現重大錯誤，影響開發進度。

---

## **單元測試的優勢**
- 幫助開發人員了解單元的功能與 API。
- 允許程式碼**重構 (Refactoring)** 而不影響功能。
- 減少專案依賴，可獨立測試某些部分。

---

## **單元測試的限制**
- 無法捕捉所有錯誤，特別是**整合錯誤或系統級別錯誤**。
- 只能測試單一模組，無法評估整體系統的相依性問題。

---

## **單元測試的最佳實踐**
- **測試案例應獨立**，不受其他測試影響。
- **一次測試一個功能**，避免過於複雜的測試。
- **使用清晰一致的命名規範**。
- **確保每個模組變更後，都有對應的單元測試**。
- **單元測試發現的錯誤應在進入下一開發階段前修復**。
- **養成「邊寫程式邊測試」的習慣**，降低未來除錯成本。

---

## **總結**
- **單元測試是測試軟體個別單元是否正常運作的一種方法**。
- **可提高開發效率、減少錯誤並降低開發成本**。
- **可透過手動或自動化測試執行，但自動化測試較為普遍**。
- **適用於 TDD，並有助於確保軟體品質**。

無論測試策略如何，**單元測試在開發過程中都是不可或缺的環節**，能夠確保系統穩定並降低維護成本。
