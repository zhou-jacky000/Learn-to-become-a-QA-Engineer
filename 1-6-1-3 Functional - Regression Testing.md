## 什麼是回歸測試？
回歸測試是一種軟體測試類型，目的是確保最近的程式或程式碼變更不會對現有功能產生負面影響。它可以是完整或部分地重新執行先前執行過的測試案例，以確保現有功能正常運作。

## 為什麼需要回歸測試？
回歸測試至關重要，因為它能識別程式碼變更是否引入了新缺陷或破壞了既有功能。如果沒有回歸測試，即使是微小的程式碼變更，也可能導致嚴重錯誤。因此，回歸測試有助於維持軟體品質，防止已知問題重現，並提高對軟體的信心。

## 何時執行回歸測試？
- **新增功能**：當應用程式加入新功能或模組時，需要進行回歸測試，以確保現有功能未受影響。
- **需求變更**：當系統發生重大變更時，需執行回歸測試，以檢查這些變更是否影響了既有功能。
- **錯誤修復後**：開發人員修復錯誤後，需要進行回歸測試，以確保修復不會影響其他相關功能。
- **效能問題修復後**：修正效能問題後，執行回歸測試，以確保不影響其他功能。
- **與外部系統整合時**：當產品與新外部系統整合時，需進行端對端回歸測試。

## 回歸測試的執行方式
當程式碼發生變更時，QA 團隊通常會進行以下活動：
1. 與開發團隊討論受影響的模組與程式庫。
2. 與產品負責人溝通，了解新功能的影響範圍。
3. 確定需執行的測試案例，以回歸測試既有功能。

## 回歸測試技術
### **全部重測（Retest All）**
- 重新執行所有測試案例，確保軟體品質。
- 缺點：耗時且資源需求高。

### **回歸測試選擇（Regression Test Selection）**
- 只執行部分選定的測試案例，以測試變更對軟體的影響。
- 測試案例分為可重複使用與不可重複使用兩類。

### **測試案例優先排序（Prioritization of Test Cases）**
- 依據業務影響、關鍵性及功能使用頻率，確定測試執行優先順序。
- 可降低回歸測試的執行成本。

## 回歸測試的類型
- **單元回歸測試（Unit Regression Testing, URT）**：僅測試修改的程式碼，而非整個影響範圍。
- **區域回歸測試（Regional Regression Testing, RRT）**：測試受影響的模組與相關依賴模組，以檢查是否產生副作用。
- **完整回歸測試（Full Regression Testing, FRT）**：覆蓋整個應用程式的所有功能，通常在較晚的版本執行。
- **修正回歸測試（Corrective Regression Testing）**：當未對功能做出變更時，可直接使用現有測試案例進行測試。
- **全面重測回歸測試（Retest All Regression Testing）**：重新測試應用程式從第一個版本以來的所有變更。
- **選擇性回歸測試（Selective Regression Testing）**：針對受影響的模組進行測試，以節省時間與成本。
- **漸進式回歸測試（Progressive Regression Testing）**：當有特定變更並建立新測試案例時，可確保舊版功能未受影響。
- **部分回歸測試（Partial Regression Testing）**：針對特定變更進行測試，而不重新測試整個應用程式。

## 自動化回歸測試
由於回歸測試涉及多次測試，建議進行自動化，以提高效率：
1. 手動測試團隊先確認需求並識別影響範圍。
2. 自動化測試團隊撰寫測試腳本，並將測試案例自動化。
3. 自動化測試執行後，檢查結果是否通過或失敗。
4. 若測試失敗，則由手動測試團隊重新檢查並回報開發人員。
5. 此過程持續進行，直到所有回歸測試通過。

### **自動化回歸測試的優勢**
- **可重複使用**：測試腳本可用於多個版本。
- **提高準確性**：減少人為錯誤。
- **節省時間**：比手動測試更快速。
- **批量執行**：可同時執行多個測試案例。
- **不需增加資源**：即使回歸測試數量增加，也不需額外人力。

## 如何選擇回歸測試的測試案例？
1. 確定變更範圍，找出受影響的應用程式部分。
2. 選擇關鍵功能測試案例，確保基線測試集完整。
3. 根據影響程度排序測試案例，優先測試影響較大的功能。

## 回歸測試最佳實踐
- **自動化測試**：可減少測試負擔，加快執行速度。
- **持續整合（CI/CD）**：確保每次程式碼變更時，自動執行回歸測試。
- **測試案例選擇**：維護涵蓋核心功能與高風險區域的測試案例。
- **定期執行**：每次程式碼變更後，都應進行回歸測試。
- **測試數據管理**：保持測試數據的一致性，確保測試結果可靠。
- **環境管理**：確保測試環境與正式環境一致。
- **記錄與追蹤缺陷**：發現的缺陷應被記錄、追蹤並依嚴重性解決。

## 回歸測試 vs. 重新測試
| 比較項目 | 重新測試（Retesting） | 回歸測試（Regression Testing） |
|----------|-----------------|----------------------|
| 測試目的 | 確保特定錯誤已修復 | 確保程式碼變更不影響既有功能 |
| 是否測試舊功能 | 否，只測試修正區域 | 是，測試所有相關功能 |
| 是否可自動化 | 否 | 是，且建議自動化 |
| 主要關注點 | 已知錯誤修復 | 整體軟體穩定性 |

## 回歸測試的挑戰
- 測試套件隨著回歸次數增加而變大，難以管理。
- 測試頻率與範圍的決定是一大挑戰（如每次變更後、每個版本後等）。
- 測試案例選擇與優化，需確保涵蓋最大影響範圍。

透過自動化與最佳實踐，可以有效提高回歸測試的效率與可靠性。
