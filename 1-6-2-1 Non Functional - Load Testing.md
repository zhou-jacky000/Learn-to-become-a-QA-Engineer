# 負載測試（Load Testing）重點整理

## 什麼是負載測試？
負載測試是一種測試方法，透過模擬實際需求來測試軟體、應用程式或網站的行為，以確保其在不同條件下的表現。它可以幫助開發團隊回答：
- **「我的系統在這些條件下是否如預期運作？」**
- **「其效能是否足夠？」**

根據 Microsoft《Web 應用程式效能測試指南》，負載測試可以測量：
- **回應時間**
- **吞吐量**
- **資源利用率**
- **應用程式的臨界點（崩潰前的最大負載）**

負載測試主要測試應用程式在**正常條件**下的表現，而壓力測試（Stress Testing）則會進一步測試應用程式在超負荷情況下的極限。

---

## 為什麼負載測試很重要？
負載測試的主要目標是確保應用程式能夠在生產環境中如預期運作。即使功能測試通過，並不代表應用程式在高負載時仍能保持穩定。負載測試的主要價值包括：
1. **識別應用程式的崩潰點**，提前修復問題，避免上線後發生故障。
2. **確保應用程式可應對實際用戶負載**，尤其是在高流量期間。
3. **降低生產環境的宕機風險**，避免業務損失。
4. **提升使用者體驗**，防止頁面加載緩慢或系統延遲影響用戶滿意度。

根據 Gartner 的報告，**網路宕機的平均成本約為每分鐘 5,600 美元，相當於每小時 30 萬美元**。透過負載測試，可以有效降低因系統問題導致的商業風險。

---

## 負載測試 vs. 壓力測試

| 測試類型 | 目的 | 測試方法 | 測試結果 |
|----------|------|---------|---------|
| **負載測試（Load Testing）** | 確保系統能夠在**正常負載**下運行良好 | 模擬真實使用場景，測試應用程式在典型使用情況下的效能 | 找出響應時間過長、系統延遲或吞吐量問題 |
| **壓力測試（Stress Testing）** | 測試系統的**極限**並找出崩潰點 | 超過正常負載的請求來測試系統在超載時的表現 | 找出系統的最大承受能力，觀察崩潰後的恢復能力 |

負載測試關注的是應用程式是否能夠在**正常負載**下穩定運作，而壓力測試則是測試系統在**超負荷狀態**下的極限表現，並找出可改進之處。

---

## 如何開始進行負載測試？
傳統的負載測試需要大量的技術知識，包含**創建測試場景、撰寫測試腳本、執行測試與分析結果**。但現在有許多工具（如 LoadNinja）可簡化測試流程，讓開發人員更容易進行負載測試。以下是基本步驟：

1. **收集需求**
   - 確定需要測試的關鍵功能
   - 了解使用者體驗的核心指標

2. **規劃用戶旅程**
   - 分析使用者如何與應用程式互動
   - 利用 APM 監控工具獲取用戶行為數據

3. **建立基準**
   - 執行初步測試來確定應用程式的基本效能指標
   - 監測後續測試是否偏離基準

4. **自動化與整合**
   - 在 CI/CD（持續整合與部署）流程中加入負載測試
   - 與現有工具（如 JMeter、LoadRunner）整合

---

## 負載測試最佳實踐

### 1. 創建真實情境
- 站在使用者角度思考，測試使用者最常執行的操作
- 模擬不同裝置與瀏覽器環境
- 考慮使用者行為的隨機性與變化性

### 2. 早測試，頻測試
- 將負載測試納入 Agile、DevOps 或 CI/CD 流程
- 避免只在開發完成後才進行效能測試

### 3. 設定合理的基準
- 負載測試不應從零開始，因為生產環境不會是空載狀態
- 先建立初始負載，再增加虛擬用戶

### 4. 利用真實數據
- 從監控工具獲取用戶行為數據（如設備類型、瀏覽器、流量模式）
- 模擬實際生產環境中的負載情境

### 5. 分析測試結果，找出根本問題
- 標記性能瓶頸
- 分析數據與代碼，確保問題能夠被開發團隊理解與修正
- 使用瀏覽器測試工具（如 LoadNinja）即時檢測與調試

---

## 如何選擇負載測試工具？
市面上有許多負載測試工具，選擇時應考慮以下因素：
- **易用性**：是否需要專業的測試腳本？
- **測試類型**：支援 Web 應用程式、API 測試還是整個系統測試？
- **自動化**：是否能與 CI/CD 流程整合？
- **分析功能**：能否產出詳細報告，幫助找出性能瓶頸？
- **成本考量**：開源工具（如 JMeter） vs. 付費工具（如 LoadRunner、LoadNinja）

### 常見負載測試工具：
| 工具名稱 | 特點 |
|----------|------|
| **JMeter** | 開源工具，適用於 Web 應用程式與 API 測試 |
| **LoadRunner** | 企業級解決方案，支援大規模負載測試 |
| **LoadNinja** | 無需撰寫測試腳本，提供即時瀏覽器測試 |
| **Gatling** | 以 Scala 為基礎，適合 DevOps 流程 |

---

## 結論
負載測試是一種關鍵測試方法，確保應用程式在**真實負載**下仍能穩定運作。透過負載測試，可以：
1. **確保應用程式在生產環境中的穩定性**
2. **提前發現系統瓶頸，降低崩潰風險**
3. **改善用戶體驗，提升業務競爭力**
4. **降低宕機成本，避免經濟損失**

透過選擇合適的工具與測試方法，開發團隊可以在專案開發過程中持續進行效能測試，確保應用程式具備高效能與穩定性，從而提升產品品質與用戶滿意度。
